#include <stdlib.h>
#include <stdio.h>

#define samples 32
#define taps 16

float input[samples] = {0,1.53884176858763,-0.363271264002680,0.363271264002681,
-1.53884176858763,-3.39932333858879e-15,1.53884176858763,
-0.363271264002680,0.363271264002681,-1.53884176858762,-6.79864667717758e-15,
1.53884176858763,-0.363271264002680,0.363271264002681,-1.53884176858763,
-1.28625052748667e-14,1.53884176858763,-0.363271264002680,0.363271264002681,
-1.53884176858763,-1.35972933543552e-14,1.53884176858763,-0.363271264002680,
0.363271264002681,-1.53884176858763,-1.43320814338436e-14,1.53884176858764,
-0.363271264002680,0.363271264002681,-1.53884176858762,-2.57250105497335e-14,
1.53884176858763};
float input1[samples] = {0,0.3008,1.6276,0.0000,1.3268,1.3268,0.0000,1.6276,0.3008,
0.0000,0.3008,1.6276,0.0000,1.3268,1.3268,0.0000,1.6276,0.3008,0.0000,0.3008,1.6276,
0.0000,1.3268,1.3268,0.0000,1.6276,0.3008,0.0000,0.3008,1.6276,0.0000,1.3268};
float output[samples];
float pm coefficients[taps] = {-0.0117264972898779,-0.0236189856324385,
0.0288894456670849,0.0355817729059884,-0.0539436241222386,-0.0819848329207590,
0.145972959037726,0.447995062383804,0.447995062383804,0.145972959037726,
-0.0819848329207590,-0.0539436241222386,0.0355817729059884,0.0288894456670849,
-0.0236189856324385	-0.0117264972898779};
float dm state[taps+1]={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};

main()
{   	  
   float temp;   

   int i; 
   int j;
   int k;

   for (k = 0; k < samples; k++)
   {
      state[0] = input[k];

	  for (i = 0, temp = 0; i < taps; i++)
         temp += coefficients[i] * state[i];

		// compiler generated code for above loop:
		// lcntr=16, do(pc,_L$316001-1)until lce;
		// mrf=mrf+r2*r1 (SSI), r1=dm(i0,m6), r2=pm(i8,m14);
		// _L$316001:

      output[k] = temp;

      for (j = taps-1; j > -1; j--)
         state[j+1] = state[j];
   }
    exit(0);
}
